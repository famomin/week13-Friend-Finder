<!DOCTYPE html>
<html>
<head>
	<title>Survey</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
	<div class="container"> <!-- container for home page heading -->
		<div class="jumbotron text-center"> <!-- Jumbotron for heading -->
			<p style="font-size: 32px; font-weight: bold; border-bottom: 2px solid black">
				Survey</p>
			<p>Answer 10 Questions</p>
			<p>And find a friend that matches your personality</p>
		</div><!-- closing Jumbotron for heading -->

		<div class="panel panel-default"> <!-- panel for asking questions -->

			<div class="panel-heading"> <!-- div for heading "About you" -->
    			<p style="font-size: 28px; font-weight: bold"; class="panel-title">About You </p>
			</div> <!-- closing div for about you heading -->

			<div class="panel-body"> <!-- div for panel body for name, pic and 10 questions -->
				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for name and pic -->
					<!-- name -->
					<h4>Name (Required)</h4>
					<input type="text" id="name" class="form-control" required="">

					<!-- profile pic -->
					<h4>Profile Picture (Required)</h4>
					<input type="text" id="picture" class="form-control" required="">
				</div> <!-- row for name and pic -->

				<div style="margin: 5px 0px 0px 0px; border-bottom: 1px solid black"></div> <!-- divider line -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 1 -->
					<h3>Question 1: </h3>
					<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question1">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 1 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 2 -->
					<h3>Question 2: </h3>
					<h4>Generally speaking, you rely more on your experience than your imagination.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question2">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 2 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 3 -->
					<h3>Question 3: </h3>
					<h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question3">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 3 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 4 -->
					<h3>Question 4: </h3>
					<h4>You rarely do something just out of sheer curiosity.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question4">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 4 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 5 -->
					<h3>Question 5: </h3>
					<h4>People can rarely upset you.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question5">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 5 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 6 -->
					<h3>Question 6: </h3>
					<h4>It is often difficult for you to relate to other people’s feelings.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question6">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 6 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 7 -->
					<h3>Question 7: </h3>
					<h4>In a discussion, truth should be more important than people’s sensitivities.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question7">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 7 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 8 -->
					<h3>Question 8: </h3>
					<h4>You rarely get carried away by fantasies and ideas.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question8">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 8 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 9 -->
					<h3>Question 9: </h3>
					<h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question9">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 9 -->

				<div class="row" style="margin: 5px 10px 20px 10px"> <!-- row for Question 10 -->
					<h3>Question 10: </h3>
					<h4>You feel more energetic after spending time with a group of people.</h4>

					<select class="selectpicker btn-group bootstrap-select" id="question10">
						<option value="">Select Option</option>
						<option value="1">1 (Strongly Disagree)</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agree)</option>
					</select>
				</div> <!-- closing row for Question 10 -->

				<button type="submit" class="btn btn-primary" id="submit" style="width: 100px">SUBMIT</button>

			</div> <!-- closing div for panel body for name, pic and 10 questions -->
		</div> <!-- closing panel for questions -->

		<footer class="footer"> <!-- footer for api links -->
    	<div class="container">
      	<p><a href="/api/tables">API Friends List </a> | <a href="https://github.com/famomin/week13-Friend-Finder">Github Repo</a></p>
      </div>
    </footer> <!-- closing footer  -->
	</div>	<!-- closing container for home page heading -->

	<!-- modal to show best match. Bootstrap code -->
	<div class="modal fade" id="openModal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Best Match</h4>
				</div>
				<div class="modal-body">
					<h3 id="modalName"></h3>
					<span id="modalPic"></span>
				</div>
				<div class="modal-footer">
					<button type="button" id="closeModal" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<!-- script to grab and post user inputs  -->
	<script type="text/javascript">
		$("#submit").on("click", function(event) {
			event.preventDefault();

			// Form validation
    	function validateForm() {
		  	var isValid = true;
				//checking if either name or pic field is blank
		  	$('.form-control').each(function() {
		    	if ( $(this).val() === '' ) {
						isValid = false;
					}
		  	});

				// checking if any user missed any questions
		  	$('.selectpicker').each(function() {
		  		if( $(this).val() === "") {
						isValid = false
					}
		  	});
		  	return isValid;
			}

			//if every thing is filled out correctly then
			if(validateForm() == true) {

				//setting all question inputs to variables
				var q1 = $("#question1").val();
				var q2 = $("#question2").val();
				var q3 = $("#question3").val();
				var q4 = $("#question4").val();
				var q5 = $("#question5").val();
				var q6 = $("#question6").val();
				var q7 = $("#question7").val();
				var q8 = $("#question8").val();
				var q9 = $("#question9").val();
				var q10 = $("#question10").val();

				//creating an object of newFriend with name, pic and and answers
				var newFriend = {
					name: $("#name").val().trim(),
					photo: $("#picture").val().trim(),
					scores: [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]
	      };

				//posting new user data to the Friends API
				$.post("/api/tables", newFriend)
					.done(function(data){
						console.log(data)

						//getting data and  pusing it to modal. Then showing modal with best match.
						$("#modalName").text(data.name);
					  $("#modalPic").html("<img src='" + data.photo + "' width='250' height='250'>")
						$("#openModal").modal("show");
				});
			}

			else {
				alert("Please fill out all fields before submitting.")
			}

			return false;
		});

		$("#closeModal").on("click", function(event) {
			event.preventDefault();

			$("#name").val("");
			$("#picture").val("");
			$("#question1").val("");
			$("#question2").val("");
			$("#question3").val("");
			$("#question4").val("");
			$("#question5").val("");
			$("#question6").val("");
			$("#question7").val("");
			$("#question8").val("");
			$("#question9").val("");
			$("#question10").val("");
		});

	</script>
</body>
</html>
